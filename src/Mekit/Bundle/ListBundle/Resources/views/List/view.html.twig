{% extends 'OroUIBundle:actions:view.html.twig' %}

{% oro_title_set({params : {"%list.name%": entity.name | default('N/A')} }) %}

{% block navButtons %}

	{#{% if resource_granted('EDIT', entity) %}#}
	{#{{ UI.editButton({#}
	{#'path': path('mekit_account_update', {'id': entity.id}),#}
	{#'entity_label': 'mekit.account.entity_label'|trans#}
	{#}) }}#}
	{#{% endif %}#}

	{#{% if resource_granted('DELETE', entity) %}#}
	{#{{ UI.deleteButton({#}
	{#'dataUrl': path('mekit_api_delete_account', {'id': entity.id}),#}
	{#'dataRedirect': path('mekit_account_index'),#}
	{#'aCss': 'no-hash remove-button',#}
	{#'dataId': entity.id,#}
	{#'id': 'btn-remove-account',#}
	{#'entity_label': 'mekit.account.entity_label'|trans#}
	{#}) }}#}
	{#{% endif %}#}


	{#{% set html %}#}
	{#{% placeholder orocrm_account_action_dropdown with {'entity': entity} %}#}
	{#{% endset %}#}
	{#{{ UI.dropdownButton({#}
	{#'label': 'orocrm.account.account_actions'|trans,#}
	{#'aCss': 'pull-right',#}
	{#'html': html#}
	{#}) }}#}

{% endblock navButtons %}

{% block pageHeader %}
	{% set breadcrumbs = {
	'entity': entity,
	'indexPath': path('mekit_list_index'),
	'indexLabel': 'mekit.list.entity_plural_label'|trans,
	'entityTitle': entity.label|trans ~ " [" ~ entity.name ~ "]" | default('N/A')
	} %}
	{{ parent() }}
{% endblock pageHeader %}


{% block content_data %}
	{% set listGroupInformationWidget %}
	{{ oro_widget_render({
	'widgetType': 'block',
	'title': 'mekit.list.widgets.listgroup_information'|trans,
	'url': path('mekit_list_widget_info', {id: entity.id})
	}) }}
	{% endset %}

	{% set listItemsWidget %}
	{{ oro_widget_render({
	'widgetType': 'block',
	'url': path('mekit_list_widget_listitems', {id: entity.id})
	}) }}
	{% endset %}

	{% set dataBlocks = [
	{
	'title': 'mekit.list.sections.general'|trans,
	'class': 'active',
	'subblocks': [{'data' : [listGroupInformationWidget]}]
	},
	{
	'title': 'mekit.list.sections.items'|trans,
	'subblocks': [{'data' : [listItemsWidget]}]
	}
	] %}



	{% set id = 'listView' %}
	{% set data = {'dataBlocks': dataBlocks} %}

	{{ parent() }}
{% endblock content_data %}
